<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="../css/styles.css"/>
    <link rel="stylesheet" href="../css/student-dashboard.css"/>
</head>
<body>
    <header>
        <img src="../images/logo.png" alt="Logo"/>
        <h1>Student Dashboard</h1>
    </header>
    <nav>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="student-dashboard.html">Dashboard</a></li>
            <li><a href="../login.html" onclick="logout(event)">Logout</a></li>
        </ul>
    </nav>

    <main>
        <div class="dashboard-container">
            <div class="dashboard-header">
                <img src="../images/logo.png" alt="Logo" class="dashboard-logo"/>
                <h1>üë®‚Äçüéì Student Dashboard</h1>
                <p id="welcomeText">Welcome, Student!</p>
            </div>

            <div class="stats-container">
                <div class="stat-card">
                    <h4>Enrolled Exams</h4>
                    <p class="number" id="enrolledExams">0</p>
                </div>
                <div class="stat-card">
                    <h4>Completed</h4>
                    <p class="number" id="completedExams">0</p>
                </div>
                <div class="stat-card">
                    <h4>Average Score</h4>
                    <p class="number" id="studentAvgScore">0%</p>
                </div>
                <div class="stat-card">
                    <h4>Rank</h4>
                    <p class="number" id="studentRank">--</p>
                </div>
            </div>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('profile')">Profile</button>
                <button class="tab-btn" onclick="switchTab('exams')">Exams</button>
                <button class="tab-btn" onclick="switchTab('results')">Results</button>
            </div>

            <section id="profile" class="tab-content active">
                <div class="card insight-hero">
                    <div class="insight-hero-content">
                        <p class="eyebrow">Self-reflection</p>
                        <h3>üß† Growth Canvas</h3>
                        <p>Capture what makes you unique so your mentors can guide you better. Update these notes anytime you evolve.</p>
                    </div>
                    <div class="insight-hero-badges">
                        <span class="badge">Personalized</span>
                        <span class="badge">Mentor-ready</span>
                    </div>
                </div>

                <div class="insight-layout">
                    <form id="studentReflectionForm" class="insight-form">
                        <div class="insights-grid">
                            <div class="insight-field gradient-blue">
                                <div class="insight-field-header">
                                    <span class="eyebrow">Confidence boost</span>
                                    <h4>Strengths</h4>
                                </div>
                                <p class="insight-field-hint">List the technologies, habits, or mindsets that help you consistently perform well.</p>
                                <textarea id="studentStrengths" name="studentStrengths" rows="3" maxlength="400" placeholder="Eg. Data structures, fast note-taking, leading labs"></textarea>
                                <div class="input-meta">
                                    <span class="hint">3‚Äì4 highlights are enough</span>
                                    <span class="char-count" data-for="studentStrengths">0/400</span>
                                </div>
                            </div>

                            <div class="insight-field gradient-amber">
                                <div class="insight-field-header">
                                    <span class="eyebrow">Focus zone</span>
                                    <h4>Weaknesses</h4>
                                </div>
                                <p class="insight-field-hint">Be honest about blockers so mentors can pair you with the right resources.</p>
                                <textarea id="studentWeaknesses" name="studentWeaknesses" rows="3" maxlength="400" placeholder="Eg. Need more practice with DBMS queries"></textarea>
                                <div class="input-meta">
                                    <span class="hint">Share what you are improving</span>
                                    <span class="char-count" data-for="studentWeaknesses">0/400</span>
                                </div>
                            </div>

                            <div class="insight-field gradient-violet full-span">
                                <div class="insight-field-header">
                                    <span class="eyebrow">Story mode</span>
                                    <h4>About You</h4>
                                </div>
                                <p class="insight-field-hint">Describe learning goals, dream roles, or anything personal that drives you.</p>
                                <textarea id="studentAbout" name="studentAbout" rows="4" maxlength="500" placeholder="Eg. I want to become a ML engineer working on education tools"></textarea>
                                <div class="input-meta">
                                    <span class="hint">Paint a quick narrative</span>
                                    <span class="char-count" data-for="studentAbout">0/500</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="primary-btn">Save Insights</button>
                            <span id="reflectionStatus" class="save-status" aria-live="polite"></span>
                        </div>
                    </form>

                    <aside class="card profile-performance">
                        <div class="preview-header">
                            <p class="eyebrow">Performance pulse</p>
                            <h4>How you're trending</h4>
                        </div>
                        <div class="profile-chart-wrapper">
                            <div class="chart-stack">
                                <canvas id="profilePerformanceChart" height="220"></canvas>
                                <div class="chart-center">
                                    <span id="profileChartValue">--</span>
                                    <small>avg score</small>
                                </div>
                            </div>
                            <p id="profileChartEmpty" class="chart-empty-text">Complete exams to unlock your personal gauge.</p>
                        </div>
                        <ul class="profile-metrics">
                            <li>
                                <span>Completed</span>
                                <strong id="profileCompleted">0</strong>
                            </li>
                            <li>
                                <span>Pass ratio</span>
                                <strong id="profilePassRate">0/0</strong>
                            </li>
                            <li>
                                <span>Best score</span>
                                <strong id="profileBest">--</strong>
                            </li>
                        </ul>
                    </aside>
                </div>
            </section>

            <section id="exams" class="tab-content">
                <div class="card">
                    <h3>üõéÔ∏è Upcoming Notifications</h3>
                    <div id="upcomingNotifications" class="notification-feed">
                        <p class="notification-empty">No upcoming exams scheduled yet.</p>
                    </div>
                </div>
            </section>

            <section id="results" class="tab-content">
                <div class="card chart-card">
                    <h3>üìà Performance Report</h3>
                    <div class="chart-wrapper">
                        <canvas id="performanceChart" height="220"></canvas>
                        <p id="chartEmptyMessage" class="chart-empty">Your performance graph will appear after you complete exams.</p>
                    </div>
                </div>

                <div class="card internal-table-card">
                    <div class="card-heading">
                        <h3>üìò Internal Marks</h3>
                        <span id="internalMarksAverage" class="tag-pill subtle">Avg --</span>
                    </div>
                    <table id="internalMarksTable">
                        <thead>
                            <tr><th>Exam</th><th>Component</th><th>Marks</th><th>Recorded On</th></tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="4" style="text-align:center;">No internal marks published yet</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card external-sync-card">
                    <div class="sync-header">
                        <div>
                            <h3>üåê VTU External Results</h3>
                            <p class="muted">Auto-updated via VTU Sync</p>
                        </div>
                        <button id="syncExternalBtn" class="primary-btn outline">Sync Now</button>
                    </div>
                    <p id="externalSyncStatus" class="sync-status muted">Last synced: --</p>
                    <table id="externalResultsTable">
                        <thead>
                            <tr><th>Course</th><th>Score</th><th>Grade</th><th>Credits</th></tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="4" style="text-align:center;">Sync to fetch latest external results</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h3>üìä Past Results</h3>
                    <table id="resultsTable">
                        <thead>
                            <tr><th>Exam</th><th>Date</th><th>Score</th><th>Status</th><th>Remarks</th><th>Invigilator</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 Proctoring System</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js" integrity="sha384-fCI3jGDdPvqORdzdrIWYA2blRsXUOcEHpGjk6Jg7HzOeVZNbYUZHC0J8JGZve56d" crossorigin="anonymous"></script>
    <script src="../js/student-dashboard.js"></script>
    <script>
    // minimal tab switch helper (keeps UI consistent with proctor)
    function switchTab(name){
        document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
        document.getElementById(name).classList.add('active');
        event.target.classList.add('active');
    }
    </script>
</body>
</html>